{"version":3,"sources":["../../src/commands/insertRight.js"],"names":["insertRight","table","editor","selection","xIndex","length","gridTable","getCol","Editor","nodes","match","n","type","startCell","c","cell","key","isReal","insertPositionCol","x","path","colspan","insertCols","Map","checkInsertable","forEach","row","col","originCol","set","newCell","rowspan","Transforms","insertNodes","at","Path","next","originPath"],"mappings":"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","sourcesContent":["import { Editor, Transforms, Path } from 'slate';\nimport { splitedTable } from '../selection';\nimport { createCell } from '../creator';\n\nconst insertRight = (table, editor) => {\n  const { selection } = editor;\n  if (!selection || !table) return;\n\n  const xIndex = table[1].length + 1;\n\n  const { gridTable, getCol } = splitedTable(editor, table);\n\n  const [startCell] = Editor.nodes(editor, {\n    match: n => n.type === 'table_cell',\n  });\n\n  const [insertPositionCol] = getCol(\n    (c) => c.cell.key === startCell[0].key && c.isReal,\n  );\n\n  const x =\n    insertPositionCol.path[xIndex] + (insertPositionCol.cell.colspan || 1) - 1;\n\n  const insertCols = new Map();\n  let checkInsertable = true;\n\n  gridTable.forEach((row) => {\n    const col = row[x];\n\n    const [originCol] = getCol(\n      (n) => n.cell.key === col.cell.key && n.isReal,\n    );\n\n    const { cell, path } = originCol;\n\n    if (\n      !row[x + 1] ||\n      (col.isReal && (!col.cell.colspan || col.cell.colspan === 1))\n    ) {\n      insertCols.set(cell.key, originCol);\n    } else if (path[xIndex] + (cell.colspan || 1) - 1 === x) {\n        insertCols.set(cell.key, originCol);\n      } else {\n        checkInsertable = false;\n      }\n  });\n\n  if (!checkInsertable) {\n    return;\n  }\n\n  insertCols.forEach((col) => {\n    const newCell = createCell({\n      rowspan: col.cell.rowspan || 1,\n    });\n\n    Transforms.insertNodes(editor, newCell, {\n      at: Path.next(col.originPath),\n    });\n  });\n}\n\nexport default insertRight;\n"],"file":"insertRight.js"}